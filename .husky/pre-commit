#!/bin/sh
. ~/.nvm/nvm.sh

echo "ğŸ”¨ Checking build..."
npm run build

if [ $? -ne 0 ]; then
    echo "âŒ Build failed! Fix errors before committing."
    exit 1
fi

echo "âœ… Build successful!"
echo ""

echo "ğŸ§¹ Running lint-staged..."
npx lint-staged

if [ $? -ne 0 ]; then
    echo "âŒ Lint-staged failed! Fix errors before committing."
    exit 1
fi

echo "âœ… Lint-staged passed!"
echo ""

echo "ğŸ“Š Checking test coverage..."
npm run test:coverage:check

if [ $? -ne 0 ]; then
    echo "âŒ Test coverage is insufficient! Add more tests."
    exit 1
fi

echo "âœ… All checks passed! Commit allowed. ğŸ‰"
